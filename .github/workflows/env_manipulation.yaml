name: "ENV vars"
run-name: ${{ github.actor }} is learning GitHub Actions
on: [push]

env:
  FOLDER: folder_name
  FILE: $FOLDER/file_name
  INPUT: http://$FOLDER-$FILE

jobs:
  preparation:
    runs-on: ubuntu-latest
    steps:
    - name: PREPARE INPUT
      run: echo "INPUT=${{ env.INPUT }}" >> $GITHUB_ENV
    - run: echo ${{ env.INPUT }}
    - name: MARKDOWN INPUT
      run: echo "INPUT IS ${{ env.INPUT }}" >> $GITHUB_STEP_SUMMARY
    #- name: ECHO INPUT
    #  run: echo "::set-output name=INPUT::${{ env.INPUT }}"
  return-nested-values:
    runs-on: ubuntu-latest
    needs: 
    - preparation
    steps:
    - run: echo ${{ env.FILE }}
    - name: Create directory ${{ env.FOLDER }}
      run: mkdir -p ${{ env.FOLDER }}
    - name: Create file ${{ env.FILE }}
      run: touch ${{ env.FILE }}
    - name: Verify directory
      run: ls -la .
    - name: Verify file
      run: ls -la ${{ env.FILE }}
    - name: Change file with ${{ env.INPUT }}
      run: |
        cat > ${{ env.FILE }} << EOF
         ${{ steps.preparation.env.INPUT }}
        EOF
    - name: Verify file content
      run: cat ${{ env.FILE }}

